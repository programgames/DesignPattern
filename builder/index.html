<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Julien Marcon">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Builder - Design Patterns</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Builder";
    var mkdocs_page_input_path = "builder.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Design Patterns</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Création</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../abstract-factory/">Abstract Factory</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../factory/">Factory</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Builder</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../prototype/">Prototype</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../singleton/">Singleton</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Structurel</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../adapter/">Adapter</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../bridge/">Bridge</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../composite/">Composite</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../decorator/">Decorator</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Design Patterns</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Création &raquo;</li>
        
      
    
    <li>Builder</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/programgames/DesignPattern/edit/master/docs/builder.md"
          class="icon icon-github"> Edit on Github</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="presentation">Présentation</h1>
<p>Le pattern builder est un design pattern de création.
Il permet de mettre de construire des objets complexes étape par étape.Il permet de créer différents types
et représentations de cet objet en utilisant le meme code de construction.</p>
<h1 id="utilite">Utilité</h1>
<p>Se débarrasser de constructeurs avec beaucoup de parametres ou bien de classes avec plein de constructeurs ( C++ )
À Utiliser lorsqu'on souhaite créer différentes représentations d'un produit ( Ex : Maison en bois, Maison en pierre ...)
ou des objets complexes ( arbres composite ... )</p>
<h1 id="notes">Notes</h1>
<p>Utiliser un directeur n'est pas forcément nécessaire, on peut appeler le builder étape par étape dans le code client.
L'avantage d'un directeur c'est qu'on va pouvoir le réutiliser de partout.</p>
<h4 id="interface-du-builder">Interface du builder :</h4>
<pre><code>&lt;?php


namespace Builder;


interface ConfigurableProductBuilder
{
    public function setName(string $name): void;

    public function setDescription(string $description): void;

    public function setVariants(...$variants): void;
}
</code></pre>

<h4 id="les-2-builders">Les 2 builders</h4>
<pre><code>&lt;?php


namespace Builder;


class ECommerceConfigurableProductBuilder implements ConfigurableProductBuilder
{
    /**
     * @var ConfigurableProduct
     */
    private $product;

    /**
     * ECommerceConfigurableProductBuilder constructor.
     */
    public function __construct()
    {
        $this-&gt;reset();
    }


    public function setName(string $name): void
    {
        $this-&gt;product-&gt;name = $name;
    }

    public function setDescription(string $description): void
    {
        $this-&gt;product-&gt;description = $description;
    }

    public function setVariants(...$variants): void
    {
        foreach ($variants as $variant) {
            $this-&gt;product-&gt;variants[] = $variant;
        }
    }

    public function getProduct(): ConfigurableProduct
    {
        $result = $this-&gt;product;
        $this-&gt;reset();

        return $result;
    }

    public function reset(): void
    {
        $this-&gt;product = new ConfigurableProduct();
    }
}
</code></pre>

<pre><code>&lt;?php


namespace Builder;


class ECommerceSimpleProductBuilder implements SimpleProductBuilder
{
    /** @var SimpleProduct */
    private $product;

    /**
     * ECommerceSimpleProductBuilder constructor.
     */
    public function __construct()
    {
        $this-&gt;reset();
    }

    public function reset(): void
    {
        $this-&gt;product = new SimpleProduct();
    }

    public function setName(string $name): void
    {
        $this-&gt;product-&gt;name = $name;
    }

    public function setPrice(string $price): void
    {
        $this-&gt;product-&gt;price = $price;
    }

    public function setDescription(string $description): void
    {
        $this-&gt;product-&gt;description = $description;
    }

    public function getProduct(): SimpleProduct
    {
        $result = $this-&gt;product;
        $this-&gt;reset();

        return $result;
    }
}
</code></pre>

<h4 id="les-classes-metiers">Les classes métiers :</h4>
<pre><code>&lt;?php


namespace Builder;


class SimpleProduct
{
    public $name;

    public $description;

    public $price;

    public function displayInfo(): void
    {
        echo &quot;Name : &quot; . $this-&gt;name . &quot; Description : &quot; . $this-&gt;description . &quot; Price : &quot; . $this-&gt;price . PHP_EOL;
    }
}
</code></pre>

<pre><code>&lt;?php


namespace Builder;


class ConfigurableProduct
{
    public $name;

    public $description;

    public $variants;

    public function displayInfo(): void
    {
        echo &quot;Name : &quot; . $this-&gt;name . &quot; Description : &quot; . $this-&gt;description . PHP_EOL;
    }
}
</code></pre>

<h4 id="les-2-directeurs">Les 2 directeurs :</h4>
<pre><code>&lt;?php


namespace Builder;


class ConfigurableProductDirector
{
    /**
     * @var ConfigurableProductBuilder
     */
    private $builder;

    public function setBuilder(ConfigurableProductBuilder $builder): void
    {
        $this-&gt;builder = $builder;
    }

    public function buildMinimalConfigurableProduct(string $name): void
    {
        $this-&gt;builder-&gt;setName($name);
    }

    public function buildFullConfigurableProduct(string $name, string $description, ...$variants): void
    {
        $this-&gt;builder-&gt;setName($name);

        $this-&gt;builder-&gt;setDescription($description);

        $this-&gt;builder-&gt;setVariants($variants);
    }
}
</code></pre>

<pre><code>&lt;?php


namespace Builder;


class SimpleProductDirector
{
    /**
     * @var SimpleProductBuilder
     */
    private $builder;

    public function setBuilder(SimpleProductBuilder $builder): void
    {
        $this-&gt;builder = $builder;
    }

    public function buildMinimalSimpleProduct(string $name): void
    {
        $this-&gt;builder-&gt;setName($name);
    }

    public function buildFullSimpleProduct(string $name,string $description,string $price): void
    {
        $this-&gt;builder-&gt;setName($name);
        $this-&gt;builder-&gt;setPrice($price);
        $this-&gt;builder-&gt;setDescription($description);
    }
}
</code></pre>

<h4 id="le-code-metier">Le code métier :</h4>
<pre><code>&lt;?php

use Builder\ConfigurableProductDirector;
use Builder\ECommerceConfigurableProductBuilder;
use Builder\SimpleProductDirector;
use Builder\ECommerceSimpleProductBuilder;

function clientCode(SimpleProductDirector $director, ConfigurableProductDirector $configurableProductDirector)
{
    $builder = new ECommerceSimpleProductBuilder();
    $director-&gt;setBuilder($builder);

    echo &quot;Minimal Simple Product for e-commerce&quot;. PHP_EOL;
    $director-&gt;buildMinimalSimpleProduct(&quot;OroCommerce sticker&quot;);
    $builder-&gt;getProduct()-&gt;displayInfo();

    echo &quot;Full Simple Product for e-commerce&quot;. PHP_EOL;
    $director-&gt;buildFullSimpleProduct(&quot;IPhone 11&quot;,&quot;The cheapest smartphone&quot;,&quot;0.99$&quot;);
    $builder-&gt;getProduct()-&gt;displayInfo();

    $builder = null;

    echo &quot;Another example to show that we can have another Director with another type of builder&quot; . PHP_EOL;
    $builder = new ECommerceConfigurableProductBuilder();
    $configurableProductDirector-&gt;setBuilder($builder);

    echo &quot;Minimal Configurable Product for e-commerce&quot;. PHP_EOL;
    $configurableProductDirector-&gt;buildMinimalConfigurableProduct('Balloon');
    $builder-&gt;getProduct()-&gt;displayInfo();

    echo &quot;Full Configurable Product for e-commerce&quot;;
    $configurableProductDirector-&gt;buildFullConfigurableProduct(&quot;IPhone 11&quot;,&quot;The cheapest smartphone&quot;,&quot;64 Go&quot;,&quot;128 Go&quot;,&quot;512 Go&quot;);
    $builder-&gt;getProduct()-&gt;displayInfo();

}
</code></pre>

<h4 id="et-le-code-qui-vas-tester-tout-ca">Et le code qui vas tester tout ça :</h4>
<pre><code>&lt;?php

require __DIR__ . './../../../../vendor/autoload.php';
require 'clientCode.php';

use Builder\ConfigurableProductDirector;
use Builder\SimpleProductDirector;

$simpleProductDirector = new SimpleProductDirector();
$configurableProductDirector =  new ConfigurableProductDirector();
clientCode($simpleProductDirector,$configurableProductDirector);
</code></pre>

<h4 id="output">Output :</h4>
<pre><code>Minimal Simple Product for e-commerce
Name : OroCommerce sticker Description :  Price : 
Full Simple Product for e-commerce
Name : IPhone 11 Description : The cheapest smartphone Price : 0.99$
Another example to show that we can have another Director with another type of builder
Minimal Configurable Product for e-commerce
Name : Balloon Description : 
Full Configurable Product for e-commerceName : IPhone 11 Description : The cheapest smartphone
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../prototype/" class="btn btn-neutral float-right" title="Prototype">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../factory/" class="btn btn-neutral" title="Factory"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../factory/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../prototype/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
